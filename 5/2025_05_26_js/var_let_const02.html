<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>var과 let과 const</title>
</head>
<body>
    <!-- 
    var의 호이스팅

    자바스크립트에서 변수를 사용할 때 조심해야하는 개념이 있다.
    바로 "변수의 호이스팅"이다. 호이스팅이란 최상단영역으로 변수를 끌어올려
    해석하는 것을 뜻하는데, 경우에 따라서 변수의 선언부분과 할당을 분리해서
    선언부분을 스코프의 가장 위쪽으로 끌어올리는 것을 말한다.
    끌어올린다고 해서 정말로 소스코드를 끌어올리는것은 아니고
    자바스크립트의 해석기가 해석할 때 그런식으로 해석한다는 뜻이다.

    아래 예제에서 x(전역변수)의 값은 10이지만 y의 변수값은 아직 할당되지 않았다는
    뜻의 undifined가 할당되어 있는 것을 알 수 있다.
    y의 값이 undifined가 나오는 이유는 호이스팅 때문이다.
    자바스크립트 해석기(인터프리터)는 함수 소스를 훑어보면서 var를 사용한 변수는
    미리 기억을 해 둔다.
    즉, 변수를 실행하기전에 미리 '이런 변수가 있구나'하고 기억하기 때문에 
    마치 미리 선언을 한것과 같은 효과를 가진다.

    그래서 변수 y는 show_number의 최상단으로 선언부분이 분리되어 호이스팅되고,
    최상단에서는 아직 값이 할당되지 않았다고 처리하여 
    console.log(y); 의 값이 undifined라는 값이 나오게 되는것이다.

    변수의 재선언과 재할당

    var를 사용한 변수는 호이스팅 외에도 '재선언'과 '재할당'이 가능하다.
    재선언이란 이전에 지어놨던 변수의 이름을 다시 한번 예약어를 사용하여
    또 선언하는것을 말한다.
    재할당이란 기존에 있던 값을 다시 새로운 값으로 할당하는것을 말한다.

    변수가 재선언이 되고 재할당이 가능하다는것은 코드가 굉장히 유연하다는 뜻이고
    이런 유연한 코드는 예상치 못한 곳에서 오류를 발생시킬 가능성이 크다는 뜻이다.

    그러므로 var키워드를 사용한 변수를 사용할 때에는 '유효범위', '호이스팅',
    '재선언과 재할당'을 잘 고려하여 사용해야 한다.
    -->
</body>
<script>
    var x = 10;

    function show_number(){
        // var y; ==>호이스팅에 의해 변수의 선언부분이 최상단으로 끌어올려짐
        console.log(x);
        console.log(y);

        // y = 20; => 이 부분에서 값이 할당 되었다고 해석함.
        var y = 20; 
    }
    show_number();

    function add_number(num1, num2){
        return num1 + num2;
    }

    var sum = add_number(10,20)
    console.log(sum);

    sum = 50; // 재할당
    console.log(sum);

    var sum = 100; // 재선언과 초기화
    console.log(sum); 
</script>
</html>